const translations = {
  en: {
    nav: [
      "Home",
      "Research",
      "Publications",
      "Codes",
      "Team",
      "News",
      "Contact",
    ],
    footerLocation: "Nanjing, Jiangsu Province, China",
    footerTel: "Tel: +86-(0)25-83687822",
    footerFax: "Fax: +86-(0)25-83595535",
    footerEmail: "Email: jiansun(AT)nju.edu.cn (AT)=@",
    news: {
      title: "Group News",
      date: [
        "April 22, 2025",
        "April 21, 2025",
        "March 22, 2025",
        "March 3, 2025",
        "December 13, 2024",
        "December 11, 2024",
        "September 30, 2024",
        "September 6, 2024",
        "October 11, 2023",
        "August 11, 2023",
        "March 3, 2023",
        "December 30, 2022",
        "December 15, 2022",
        "January 24, 2022",
        "January 25, 2021",
        "January 21, 2021",
        "June 24, 2020",
        "April 14, 2020",
        "July 3, 2019",
      ],
      items: [
        "【Xinhua News Agency Report】Chinese and international researchers have unveiled the laws governing the evolution of materials 'from two-dimensional to three-dimensional.'",
        "【Sohu News Report】Interview with Professor Sun Jian from Nanjing University: Superionic State Unveils the Origins of Ice Giant Magnetic Fields, and AI Algorithms Investigate Exotic Materials Inside Giant Planets",
        "The National Natural Science Foundation of China's Department of Interdisciplinary Sciences convened the kick-off meeting and implementation plan argumentation session for the major project 'Physical Mechanisms and Effects of the Interior Materials and Their State Evolution in Giant Planets.'",
        "Professor Sun Jian's team released the crystal structure search software MAGUS 2.0.",
        "Professor Sun Jian's team predicts quasi-two-dimensional spin Pells phase transition in potassium ammonium compounds.",
        "The collaborative team of Wen Haihu and Sun Jian from the School of Physics has discovered superconductivity in the manganese-based compound MnB₄ under high pressure.",
        "Professor Sun Jian's team used MAGUS to predict novelty two-dimensional materials of M4XY2 family.",
        "Professor Sun Jian's team released high-precision message transmission machine learning force field HotPP.",
        "Professor Sun Jian and his colleagues from the School of Physics have used machine learning to provide important clues for solving a high-pressure science problem that has persisted for over 30 years.",
        "Professor Sun Jian and his colleagues from the School of Physics have released the crystal structure search software MAGUS, which is assisted by machine learning and graph theory, in the journal National Science Review (NSR).",
        "Professor Sun Jian and his colleagues from the School of Physics have predicted the existence of superionic magnesium oxide hydrate in the interiors of ice giants.",
        "Professor Sun Jian and his colleagues have predicted the existence of metallic aluminum oxides in the interiors of giant planets.",
        "Professor Sun Jian and his colleagues from the School of Physics have predicted the existence of lithium-aluminum compounds that possess both superconducting and superionic properties.",
        "Professor Sun Jian and his colleagues have predicted the existence of superionic silicon–oxygen–hydrogen compounds in the interiors of giant planets.",
        "Professor Sun Jian and his colleagues have predicted the existence of high-pressure phases of silica with mixed coordination in the interiors of ice giants.",
        "Professor Sun Jian and his colleagues have discovered one-dimensional chain-like cooperative diffusion in the high-pressure phases of metallic calcium.",
        "Professor Sun Jian and his colleagues have made new progress in the exploration of novel states of planetary materials.",
        "PRX reports the latest research achievements of Professor Sun Jian's research group in the study of new states of matter under high pressure.",
        "Nature Physics reports the latest research achievements of Professor Sun Jian, Professor Wang Huitian, and their colleagues in the study of superionic states.",
      ],
    },
  },

  zh: {
    nav: ["主页", "研究", "论文", "代码", "团队", "新闻", "联系我们"],
    footerLocation: "中国江苏省南京市",
    footerTel: "电话：+86-(0)25-83687822",
    footerFax: "传真：+86-(0)25-83595535",
    footerEmail: "邮箱：jiansun(AT)nju.edu.cn (AT)=@",
    news: {
      title: "课题组新闻",
      date: [
        "2025.04.22",
        "2025.04.21",
        "2025.03.22",
        "2025.03.03",
        "2024.12.13",
        "2024.12.11",
        "2024.11.30",
        "2024.11.06",
        "2023.10.11",
        "2023.08.11",
        "2023.03.03",
        "2022.12.30",
        "2022.12.15",
        "2022.01.24",
        "2021.01.25",
        "2021.01.21",
        "2020.06.24",
        "2020.04.14",
        "2019.07.03",
      ],
      items: [
        "【新华社报道】中外科研人员揭示物质“从二维到三维”演变规律",
        "【搜狐科技】对话南京大学孙建：超离子态揭秘冰巨星磁场来源，AI算法探究巨行星内部新奇物质",
        "国家自然科学基金委员会交叉科学部“巨行星内部物质及其物态演化的物理机制和效应”重大项目启动暨实施方案论证会召开",
        "孙建教授课题组发布晶体结构搜索软件MAGUS2.0。",
        "孙建教授团队预言钾铵化合物中的准二维自旋佩尔斯相变。",
        "物理学院闻海虎、孙建合作团队在高压下锰基化合物MnB4中发现超导电性",
        "孙建教授团队用MAGUS预测具有新奇物性的M4XY2家族二维材料。",
        "孙建教授等人发布高精度消息传递机器学习力场HotPP",
        "物理学院孙建教授等人用机器学习为破解存在30多年的高压科学难题提供重要线索",
        "物理学院孙建教授等人在NSR发布机器学习与图论辅助的晶体结构搜索软件MAGUS",
        "物理学院孙建教授等人预言冰巨星内部存在超离子态氧化镁水合物",
        "孙建教授等人预言巨行星内部存在金属性铝氧化物",
        "物理学院孙建教授等人预言兼有超导和超离子态性质的锂-铝化合物",
        "孙建教授等人预言巨行星内部存在超离子态硅-氧-氢化合物",
        "孙建教授等人预言冰巨星内部存在二氧化硅混合配位高压相",
        "孙建教授等人发现金属钙高压相中的一维链状协同扩散",
        "孙建教授等人在行星物质新物态方面取得新进展",
        "PRX报道孙建教授课题组在高压下的新物态研究方面的最新成果",
        "《自然•物理》报道孙建教授王慧田教授等人在超离子态研究方面的最新成果",
      ],
    },
  },
};

// 切换语言按钮
const langEnBtn = document.getElementById("lang-en");
const langZhBtn = document.getElementById("lang-zh");

// 主切换函数
function setLanguage(lang) {
  const data = translations[lang];

  // 导航栏
  document.querySelectorAll("nav ul li a").forEach((link, idx) => {
    if (data.nav[idx]) link.textContent = data.nav[idx];
  });

  // 页脚
  const contactInfo = document.querySelectorAll("footer .contact-info p");
  if (contactInfo.length >= 4) {
    contactInfo[0].textContent = data.footerLocation;
    contactInfo[1].textContent = data.footerTel;
    contactInfo[2].textContent = data.footerFax;
    contactInfo[3].innerHTML = data.footerEmail;
  }

  // 页面标题
  const title = document.querySelector("#news h2");
  if (title) title.textContent = data.news.title;

  // 日期
  const date = document.querySelectorAll("#news time");
  date.forEach((t, idx) => {
    t.textContent = data.news.date[idx];
  });

  // 给多个日期的新闻加上【HOT！！】的标签
  const newsTimes = document.querySelectorAll(".news-item time");
  const hotDates = ["2025-03-22", "2025-04-22", "2025-04-21"]; // 需要加HOT的日期列表

  newsTimes.forEach((time) => {
    const date = time.getAttribute("datetime");
    if (hotDates.includes(date)) {
      // 检查当前日期是否在hotDates数组中
      const hotLabel = document.createElement("span");
      hotLabel.className = "hot-label";
      hotLabel.textContent = lang === "en" ? "【HOT!!】" : "【热门!!】";
      time.insertBefore(hotLabel, time.firstChild);
    }
  });

  // 新闻内容翻译（仅翻译文本，保留 link）
  const newsItems = document.querySelectorAll(".news-item p");
  newsItems.forEach((p, idx) => {
    const a = p.querySelector("a");
    if (a && data.news.items[idx]) {
      // 替换 p 内容为：翻译后的文本 + 原 a 标签
      const newText = data.news.items[idx];
      const href = a.getAttribute("href");
      const target = a.getAttribute("target");

      p.innerHTML = newText + " ";
      const newA = document.createElement("a");
      newA.href = href;
      if (target) newA.target = target;
      newA.textContent = lang === "zh" ? "Link" : "Link";
      p.appendChild(newA);
    }
  });
}
